PRODUCT BRIEF: AI-Powered Training & Nutrition Tracker

1. EXECUTIVE SUMMARY
Product Name: TrainSync (working title)
Product Type: Progressive Web App (PWA)
Target User: Moustapha (primary), fitness enthusiasts rebuilding strength and cardio capacity
Core Problem:
Training programs are static and don't adapt to reality. Nutrition tracking is tedious. Users lack real-time coaching during workouts and intelligent accountability for rest periods and meal timing.
Solution:
AI-powered training app that combines structured workout programming with intelligent nutrition tracking. Uses Gemini 2.0 Flash for meal photo analysis, real-time workout adjustments, pattern recognition, and contextual coaching. Tracks rest periods to maintain accountability and provides smart meal reminders based on training schedule and performance.
Key Differentiator:
LLM-powered adaptive programming that learns from your performance data and adjusts week-to-week, combined with friction-free nutrition logging via photos/voice.
Business Model (future):

Free tier: Basic tracking, manual adjustments
Pro tier ($8-12/month): AI coaching, pattern analysis, advanced insights
Currently: MVP for personal use


2. PRODUCT VISION & GOALS
Vision Statement
"Your AI training partner that adapts to how you actually perform, not how a generic program thinks you should."
Success Metrics (3 months)

Daily active usage: 5+ days per week
Workout completion rate: 80%+
Nutrition logging: 4+ meals per day
Weight progression: +0.5kg per week toward 85-90kg target
Workout performance: progressive overload maintained across 80% of exercises

User Goals

Gain 10-12kg (75-78kg â†’ 85-90kg) over 6 months
Fix cardio capacity (2 rounds â†’ 8+ rounds bag work)
Get stronger for boxing without compromising conditioning
Eat consistently to support weight gain
Maintain accountability for rest periods and meal timing


3. CORE FEATURES & USER FLOWS
Feature Set - MVP
3.1 Workout System

Pre-programmed 5-day training split (Mon/Wed: Bag work, Thu: Upper, Fri: Cardio, Sat: Lower)
Exercise-by-exercise guidance with images
Automatic timers (work + rest) with haptic feedback
Rest period tracking with accountability (actual vs target)
Weight adjustment mid-workout
Post-set difficulty rating (Easy/Good/Hard) with context
Workout completion logging
Export to Apple Notes

3.2 Nutrition System

Photo-based meal logging (Gemini vision API)
Voice-based meal logging
Text-based quick logging
Calorie & protein tracking vs daily targets (3,100 cal, 155g protein)
Meal templates ("Repeat yesterday's breakfast")
Daily nutrition summary with progress bars

3.3 AI Coaching (Gemini 2.0 Flash)

Meal analysis from photos (food items, calories, protein estimate)
Weekly workout adjustment recommendations (weight, volume, rest)
Pattern recognition (correlate nutrition â†’ performance)
Contextual meal reminders based on schedule and recent eating
Post-workout feedback based on performance and nutrition
Weekly review synthesis with actionable insights

3.4 Progress Tracking

Weekly weigh-ins (Wednesday mornings)
Workout completion calendar
Exercise progression charts (weight over time)
Nutrition consistency tracking
Rest accountability metrics (avg extra rest time)


User Flows
Flow 1: Morning Routine
1. User wakes up â†’ notification: "Morning. Bag work at 6pm today."
2. User eats breakfast â†’ opens app â†’ taps "Log Meal"
3. Takes photo of eggs and coffee
4. Gemini analyzes â†’ "~450 cal, 25g protein. Sound right?"
5. User taps "Yes" â†’ meal logged (15 seconds total)
6. App shows: "2,650 cal remaining, training in 9 hours"
Flow 2: Workout Session
1. User arrives at gym â†’ opens app â†’ taps "START WORKOUT"
2. App shows: "Wednesday - Bag Work + Conditioning"
3. First exercise: Jump Rope, Round 1/5, 2:00 work
4. User taps "START ROUND" â†’ timer begins, screen stays on
5. Timer counts down with green progress bar
6. At 0:00 â†’ haptic buzz, auto-starts 1:00 rest timer (blue)
7. Rest ends â†’ shows "Round 2/5" â†’ user taps "START"
8. After 5 rounds â†’ "How did it feel?" â†’ user taps "Good"
9. Auto-advances to next exercise (Bag Work)
10. Repeat pattern through all 4 exercise blocks
11. End of workout â†’ "Save to Notes" â†’ pre-filled summary
Flow 3: Rest Period Accountability
1. User completes Set 1 of Goblet Squats
2. App starts 2:30 rest timer
3. Timer reaches 0:00 â†’ haptic + screen shows "Time for Set 2"
4. User still resting â†’ counter continues in red: "+0:23 extra"
5. User finally taps "START SET" at +1:15 extra rest
6. Logged: "Set 2: Actual rest 3:45 (Target 2:30, +1:15)"
7. End of workout summary: "Avg +52sec extra rest on squats - weight too heavy or distracted?"
Flow 4: Contextual Meal Reminder
1. 1:30 PM â†’ User hasn't logged lunch
2. Notification: "Lunch time. You're at 450 cal, need 2,650 more. Training in 4.5 hours - fuel up."
3. User ignores
4. 2:15 PM â†’ Still no lunch logged
5. Notification: "You missed lunch. Training in 3h45m and you're at 450 cal. You'll be wrecked."
6. User logs meal via voice: "Chicken rice vegetables"
7. Gemini: "~750 cal, 45g protein. Logged. You're at 1,200 for the day."
Flow 5: Weekly Review
1. Sunday evening â†’ App triggers weekly review
2. Gemini analyzes: 
   - Weight: 76kg â†’ 76.3kg (+0.3kg, target +0.5kg)
   - Workouts: 4/5 completed
   - Nutrition: avg 2,850 cal (target 3,100), missed target 2 days
   - Performance: Upper body marked "Hard" after 135g protein day
   - Rest periods: Avg +45sec extra on lower body days
3. App shows summary card with insights:
   "Weight gain slower than target but performance is good. Your 'Hard' days correlate with low protein intake. Add 100 cal/day, focus on hitting 160g protein on strength days. Either push lower body weight or reduce phone time - you're averaging +45sec extra rest."
4. User can tap "Apply changes" â†’ next week's program adjusted

4. DESIGN STRATEGY
4.1 Design Philosophy
Core Principles:

Zero Cognitive Load - No decisions during workout, app guides you through
Glanceable Information - Understand any screen in < 2 seconds
Minimal Friction - < 3 taps to log anything
Instant Feedback - Every action has immediate visual/haptic response
Respectful Notifications - Escalate intelligently, never nag

Design Language:

iOS-native components (feels familiar, zero learning curve)
Minimalist aesthetic (remove everything non-essential)
Dark mode default (gym lighting, battery)
High contrast (readable with tired eyes, sweaty hands)
Bold typography hierarchy (critical info jumps out)


4.2 Visual Design System
Color Palette:
Backgrounds:
- Deep:     #000000  (pure black, OLED-friendly)
- Surface:  #1C1C1E  (Apple dark elevated)
- Elevated: #2C2C2E  (cards, buttons)

Functional:
- Primary:  #0A84FF  (iOS blue - actions)
- Work:     #30D158  (iOS green - active training)
- Rest:     #64D2FF  (light blue - recovery)
- Warning:  #FF9F0A  (iOS orange - attention)
- Danger:   #FF453A  (iOS red - stop/critical)
- Success:  #34C759  (iOS green - completed)

Text:
- Primary:   #FFFFFF
- Secondary: #98989D  (Apple secondary text)
- Tertiary:  #636366
- Disabled:  #48484A
Typography:
System Font: SF Pro (iOS native)

Headers:       SF Pro Display Bold, 28-32px
Subheaders:    SF Pro Display Semibold, 20-24px
Body:          SF Pro Text Regular, 16-18px
Small text:    SF Pro Text Regular, 14px
Timers/Stats:  SF Pro Rounded Bold, 72-96px (friendly, energetic)
Numbers:       SF Pro Rounded Medium, 48-64px
Spacing Scale:
4px   - Micro spacing (icon padding)
8px   - Tight spacing (related elements)
12px  - Default spacing (between components)
16px  - Comfortable spacing (section padding)
24px  - Loose spacing (major sections)
32px  - Screen margins
48px  - Major section breaks
Component Specs:
Buttons:
Primary:
- Height: 56px
- Padding: 16px horizontal
- Border radius: 12px
- Background: #0A84FF
- Text: SF Pro Display Semibold, 18px, white
- States: Default, Pressed (scale 0.95), Disabled (opacity 0.4)

Secondary:
- Height: 48px
- Background: #2C2C2E
- Border: 1px solid #48484A
- Text: SF Pro Display Medium, 16px, #98989D
Input Fields:
- Height: 48px
- Padding: 12px horizontal
- Border radius: 8px
- Background: #2C2C2E
- Border: 1px solid #48484A (default), #0A84FF (focused)
- Text: SF Pro Text Regular, 16px
Progress Bars:
- Height: 8px
- Border radius: 4px
- Background: #2C2C2E
- Fill: #0A84FF (default), #30D158 (success), #FF9F0A (warning)
- Animation: 400ms ease-out
Cards:
- Background: #1C1C1E
- Border radius: 16px
- Padding: 20px
- Shadow: 0px 2px 8px rgba(0, 0, 0, 0.4)
Iconography:

SF Symbols (iOS native icon set)
24x24px default size
20x20px for inline text
32x32px for prominent actions
Line weight: Medium


4.3 Motion & Interaction
Animation Principles:

Duration: 200-400ms (feels instant but polished)
Easing: ease-out (natural deceleration)
Purpose: Feedback, not decoration
Reduce motion: Respect iOS accessibility settings

Micro-interactions:
Button Press:
Tap down: Scale 0.95, 150ms ease-out
Tap up: Scale 1.0, 150ms spring (tension: 300, friction: 20)
Haptic: Light impact
Progress Fill:
Start: Width 0%, opacity 0.8
End: Width 100%, opacity 1.0
Duration: 400ms ease-out
Haptic at: 50%, 100%
Timer Countdown:
Number change: Fade old (100ms), fade in new (100ms)
Last 10 seconds: Color shift yellow (#FF9F0A)
Last 5 seconds: Color shift red (#FF453A), pulse scale 1.0 â†’ 1.05 â†’ 1.0 (500ms)
Haptic: Medium impact at 10s, 5s, 3s, 2s, 1s, heavy impact at 0s
Success State:
Checkmark: Scale 0 â†’ 1.2 â†’ 1.0 (300ms spring)
Background: Fade in success color (200ms)
Haptic: Notification success
Confetti (streaks/PRs): 60 particles, 1s duration, subtle
Page Transitions:
Forward: Slide left (300ms ease-out)
Back: Slide right (300ms ease-out)
Modal: Slide up from bottom (250ms ease-out)
Dismiss: Slide down (250ms ease-in)
Gesture Controls:

Swipe right: Back navigation
Swipe left on item: Delete/Skip
Long press: Quick actions menu
Pull down: Refresh data
Double tap timer: Pause/Resume


5. LAYOUT SPECIFICATIONS
5.1 Screen Layouts
HOME SCREEN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† [Menu]              [Profile] â”‚  // 56px header
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚  Wed, Nov 27      76.0 kg â†—     â”‚  // Date + weight (18px)
â”‚                                  â”‚
â”‚  TODAY'S TRAINING                â”‚  // 14px tertiary
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  Bag Work + Conditioning   â”‚  â”‚  // 20px semibold
â”‚  â”‚  ~50 minutes               â”‚  â”‚  // 14px secondary
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  âšªâšªâšª Not started         â”‚  â”‚  // Progress dots
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  [START WORKOUT]           â”‚  â”‚  // Primary button, 56px
â”‚  â”‚                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  // Card: 16px radius
â”‚                                  â”‚
â”‚  NUTRITION TODAY                 â”‚  // 14px tertiary
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  2,450 / 3,100 cal         â”‚  â”‚  // 24px bold
â”‚  â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 79%     â”‚  â”‚  // Progress bar
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  155 / 155g protein âœ“      â”‚  â”‚  // 18px regular
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• 100%   â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚  [LOG MEAL]                â”‚  â”‚  // Secondary button, 48px
â”‚  â”‚                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  THIS WEEK                       â”‚  // 14px tertiary
â”‚  âš« âš« âšª âšª âšª                     â”‚  // Week dots: 12px each
â”‚  M  T  W  T  F                   â”‚  // 12px labels
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  [Home] [Today] [Progress] [â€¢â€¢]    // Bottom tab bar, 56px
WORKOUT - EXERCISE SCREEN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back]                [Skip â†’]â”‚  // 44px top bar
â”‚                                  â”‚
â”‚         [Exercise Image]         â”‚  // 200x200px, centered
â”‚                                  â”‚
â”‚      GOBLET SQUATS               â”‚  // 24px bold, centered
â”‚                                  â”‚
â”‚                                  â”‚
â”‚        SET 2 OF 4                â”‚  // 80px bold, centered
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    Target: 10 reps @ 22kg        â”‚  // 18px regular
â”‚    Last: 10 reps @ 20kg (Good)   â”‚  // 14px secondary
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    [20kg â–¼]                      â”‚  // Weight selector
â”‚                                  â”‚
â”‚                                  â”‚
â”‚      [START SET]                 â”‚  // Giant button, 64px
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    Rest after: 2:30              â”‚  // 14px tertiary
â”‚                                  â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
TIMER SCREEN - WORK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   GOBLET SQUATS - Set 2/4        â”‚  // 18px, top
â”‚                                  â”‚
â”‚                                  â”‚
â”‚          [â”€â”€â”€â”€â”€â”€â”€â”€]               â”‚  // Circular progress
â”‚                                  â”‚
â”‚            1:34                  â”‚  // 96px bold, center
â”‚                                  â”‚
â”‚          [â”€â”€â”€â”€â”€â”€â”€â”€]               â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    [PAUSE]      [DONE EARLY]     â”‚  // Action buttons
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    Next: 2:30 rest               â”‚  // 14px tertiary, bottom
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
// Green circular progress (#30D158)
// Screen stays on, haptics at intervals
TIMER SCREEN - REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   REST BETWEEN SETS              â”‚  // 18px, top
â”‚                                  â”‚
â”‚                                  â”‚
â”‚          [â”€â”€â”€â”€â”€â”€â”€â”€]               â”‚  // Circular progress
â”‚                                  â”‚
â”‚            0:43                  â”‚  // 96px bold, center
â”‚                                  â”‚
â”‚          [â”€â”€â”€â”€â”€â”€â”€â”€]               â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â”‚         [SKIP REST]              â”‚  // Secondary button
â”‚                                  â”‚
â”‚                                  â”‚
â”‚    Next: Goblet Squat Set 3      â”‚  // 14px tertiary
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
// Blue circular progress (#64D2FF)
// After timer ends, continues in red with "+0:XX extra"
POST-SET FEEDBACK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  â”‚
â”‚   GOBLET SQUATS - SET 2          â”‚  // 20px semibold
â”‚   COMPLETE âœ“                     â”‚  // With animation
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   How many reps did you do?      â”‚  // 16px regular
â”‚                                  â”‚
â”‚      [âˆ’]    10    [+]            â”‚  // Large number picker
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   How did it feel?               â”‚  // 16px regular
â”‚                                  â”‚
â”‚   [ðŸ˜Œ Easy] [ðŸ‘ Good] [ðŸ’ª Hard]  â”‚  // Emoji buttons, 64px
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   Why Hard? (optional)           â”‚  // 14px secondary
â”‚   [ ] Weight too heavy           â”‚  // Checkboxes
â”‚   [ ] Fatigued                   â”‚
â”‚   [ ] Form breakdown             â”‚
â”‚   [ ] Joint/pain issue           â”‚
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   [NEXT SET â†’]                   â”‚  // Primary button
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
// Auto-advances after selection
MEAL LOGGING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back]         LOG MEAL        â”‚  // Header
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   [ðŸ“·  Take Photo]               â”‚  // Large button, 80px
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   [ðŸŽ¤  Voice Input]              â”‚  // Large button, 80px
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   [âŒ¨ï¸  Type It Out]              â”‚  // Large button, 80px
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   â”€â”€â”€ OR QUICK ADD â”€â”€â”€           â”‚  // Divider
â”‚                                  â”‚
â”‚   [Repeat Yesterday's Breakfast] â”‚  // Template buttons
â”‚   [Usual Chicken Rice]           â”‚
â”‚   [Protein Shake]                â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
MEAL PHOTO ANALYSIS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back]                         â”‚
â”‚                                  â”‚
â”‚   [Photo of meal - preview]      â”‚  // Full width, 300px max
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   Chicken, rice, vegetables      â”‚  // 18px semibold
â”‚                                  â”‚
â”‚   Estimated:                     â”‚  // 14px tertiary
â”‚   ~650 calories                  â”‚  // 24px bold
â”‚   ~48g protein                   â”‚  // 18px regular
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   Meal type:                     â”‚
â”‚   (â€¢) Lunch  ( ) Dinner  ( ) Snackâ”‚ // Radio buttons
â”‚                                  â”‚
â”‚                                  â”‚
â”‚   Sound right?                   â”‚  // 16px regular
â”‚                                  â”‚
â”‚   [ðŸ‘ Yes, Log It]               â”‚  // Primary, 56px
â”‚   [âœï¸ Adjust Numbers]            â”‚  // Secondary, 48px
â”‚   [âŒ Wrong, Retake]             â”‚  // Tertiary, 48px
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
WEEKLY REVIEW
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â† Back]    WEEKLY REVIEW        â”‚
â”‚                                  â”‚
â”‚  Week of Nov 18-24               â”‚  // 14px tertiary
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ WEIGHT PROGRESS            â”‚  â”‚
â”‚  â”‚ 76.0 â†’ 76.3 kg (+0.3kg)    â”‚  â”‚  // 20px semibold
â”‚  â”‚ Target: +0.5kg âš ï¸          â”‚  â”‚  // 16px with icon
â”‚  â”‚ [Mini trend chart]         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TRAINING                   â”‚  â”‚
â”‚  â”‚ 4/5 workouts completed âœ“   â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚ Performance:               â”‚  â”‚
â”‚  â”‚ â€¢ Upper body: All "Good"   â”‚  â”‚
â”‚  â”‚ â€¢ Lower: Avg +52s extra    â”‚  â”‚
â”‚  â”‚   rest (distracted?)       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ NUTRITION                  â”‚  â”‚
â”‚  â”‚ Avg: 2,850 cal/day         â”‚  â”‚
â”‚  â”‚ Target hit: 5/7 days       â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚ Pattern: "Hard" workouts   â”‚  â”‚
â”‚  â”‚ after low-protein days     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ðŸ’¡ RECOMMENDATIONS         â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚ 1. Increase to 3,000 cal   â”‚  â”‚
â”‚  â”‚ 2. 160g protein on         â”‚  â”‚
â”‚  â”‚    strength days           â”‚  â”‚
â”‚  â”‚ 3. Reduce phone time       â”‚  â”‚
â”‚  â”‚    between sets            â”‚  â”‚
â”‚  â”‚                            â”‚  â”‚
â”‚  â”‚ [APPLY CHANGES]            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5.2 Responsive Behavior
iPhone SE (375x667) - Small

Reduce font sizes by 2px
Stack elements vertically
Reduce card padding to 16px
Smaller exercise images (160x160)

iPhone 14 Pro (393x852) - Standard

Default layouts as specified
Optimal experience

iPhone 14 Pro Max (430x932) - Large

Increase font sizes by 2px
More comfortable spacing
Larger touch targets (+4px)

iPad (810x1080) - Tablet

Two-column layout for home screen
Side-by-side exercise info + timer
Larger images (300x300)


6. SYSTEM ARCHITECTURE
6.1 Technology Stack
Frontend:

HTML5 + CSS3 (custom, no frameworks)
JavaScript (ES6+, no frameworks for MVP)
PWA APIs:

Service Worker (offline support)
Web App Manifest (installability)
Cache API (offline data)
Notifications API (meal reminders)
Vibration API (haptic feedback)



Backend/APIs:

Gemini 2.0 Flash API (Google AI Studio)

Vision for meal analysis
Text for workout adjustments
Long-context for weekly reviews



Data Storage:

LocalStorage (workouts, meals, settings)
IndexedDB (photos, larger datasets)
Export to Apple Notes (backup/sharing)

Hosting:

Static hosting (Vercel, Netlify, or Render)
Single HTML file + assets
CDN for global delivery


6.2 System Architecture Diagram
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER DEVICE                          â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  PWA Frontend                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚  â”‚
â”‚  â”‚  â”‚  Home    â”‚  â”‚ Workout  â”‚  â”‚ Nutritionâ”‚          â”‚  â”‚
â”‚  â”‚  â”‚  Screen  â”‚  â”‚  Flow    â”‚  â”‚  Logging â”‚          â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â”‚
â”‚  â”‚         â”‚              â”‚              â”‚              â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                        â”‚                              â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚         â”‚    State Management         â”‚              â”‚  â”‚
â”‚  â”‚         â”‚  (workouts, meals, prefs)   â”‚              â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                        â”‚                              â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚         â”‚    Local Storage Layer      â”‚              â”‚  â”‚
â”‚  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”‚
â”‚  â”‚         â”‚  â”‚LocalStorageâ”‚ IndexedDBâ”‚  â”‚              â”‚  â”‚
â”‚  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                        â”‚                              â”‚  â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚         â”‚     Service Worker          â”‚              â”‚  â”‚
â”‚  â”‚         â”‚  (offline, caching, sync)   â”‚              â”‚  â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚ HTTPS
                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                        â”‚
        â”‚         EXTERNAL APIS                  â”‚
        â”‚                                        â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚   Gemini 2.0 Flash API           â”‚ â”‚
        â”‚  â”‚   (Google AI Studio)             â”‚ â”‚
        â”‚  â”‚                                   â”‚ â”‚
        â”‚  â”‚  â€¢ Vision: Meal photo analysis   â”‚ â”‚
        â”‚  â”‚  â€¢ Text: Workout adjustments     â”‚ â”‚
        â”‚  â”‚  â€¢ Long: Weekly reviews          â”‚ â”‚
        â”‚  â”‚                                   â”‚ â”‚
        â”‚  â”‚  Rate Limit: 1,500 req/day FREE  â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6.3 Data Models
User Profile:
javascript{
  id: "user_001",
  name: "Moustapha",
  currentWeight: 76.0,
  targetWeight: [85, 90],
  weeklyWeighIns: [
    { date: "2024-11-20", weight: 75.8 },
    { date: "2024-11-27", weight: 76.0 }
  ],
  nutritionTargets: {
    calories: 3100,
    protein: 155
  },
  trainingSchedule: {
    monday: "bag_conditioning",
    tuesday: "rest",
    wednesday: "bag_conditioning",
    thursday: "upper_strength",
    friday: "cardio_recovery",
    saturday: "lower_strength",
    sunday: "rest"
  },
  preferences: {
    notifications: true,
    haptics: true,
    darkMode: true
  }
}
Workout Session:
javascript{
  id: "workout_20241127_001",
  date: "2024-11-27T18:00:00Z",
  type: "bag_conditioning",
  status: "completed",
  duration: 2880, // seconds
  exercises: [
    {
      id: "jump_rope_001",
      name: "Jump Rope",
      type: "cardio_intervals",
      rounds: 5,
      workTime: 120, // seconds
      restTime: 60,
      completed: [
        { round: 1, completed: true, feeling: "good" },
        { round: 2, completed: true, feeling: "good" },
        { round: 3, completed: true, feeling: "good" },
        { round: 4, completed: true, feeling: "hard", reason: "fatigued" },
        { round: 5, completed: true, feeling: "hard", reason: "fatigued" }
      ]
    },
    {
      id: "goblet_squat_001",
      name: "Goblet Squats",
      type: "strength",
      sets: 4,
      targetReps: 10,
      targetWeight: 22, // kg
      targetRest: 150, // seconds
      completed: [
        { 
          set: 1, 
          reps: 10, 
          weight: 22, 
          actualRest: 150, 
          feeling: "good" 
        },
        { 
          set: 2, 
          reps: 10, 
          weight: 22, 
          actualRest: 225, // +75s extra
          feeling: "good",
          extraRestReason: "distracted"
        },
        { 
          set: 3, 
          reps: 9, 
          weight: 22, 
          actualRest: 180, // +30s extra
          feeling: "hard",
          hardReason: "fatigued"
        },
        { 
          set: 4, 
          reps: 8, 
          weight: 22, 
          actualRest: 195, // +45s extra
          feeling: "hard",
          hardReason: "fatigued"
        }
      ]
    }
  ],
  notes: "Gassed during jump rope rounds 4-5. Struggled with squats set 3-4.",
  aiSummary: "Performance declined mid-workout. Likely under-fueled - only 1,200 cal logged before training."
}
Meal Log:
javascript{
  id: "meal_20241127_002",
  date: "2024-11-27T13:30:00Z",
  type: "lunch",
  method: "photo", // or "voice", "text"
  photo: "blob:xyz", // stored in IndexedDB
  aiAnalysis: {
    foods: ["chicken breast", "white rice", "mixed vegetables"],
    calories: 650,
    protein: 48,
    confidence: 0.85
  },
  userAdjusted: false,
  finalValues: {
    calories: 650,
    protein: 48
  }
}
Daily Nutrition:
javascript{
  date: "2024-11-27",
  target: { calories: 3100, protein: 155 },
  actual: { calories: 2450, protein: 155 },
  meals: [
    { id: "meal_001", time: "09:15", cal: 450, protein: 25 },
    { id: "meal_002", time: "13:30", cal: 650, protein: 48 },
    { id: "meal_003", time: "16:15", cal: 300, protein: 12 },
    { id: "meal_004", time: "19:45", cal: 850, protein: 63 },
    { id: "meal_005", time: "22:00", cal: 200, protein: 7 }
  ],
  reminders: [
    { time: "09:00", sent: true, logged: true, delay: 15 }, // logged 15min after
    { time: "13:30", sent: true, logged: true, delay: 0 },
    { time: "14:00", sent: true, logged: false }, // escalation, ignored
    { time: "14:30", sent: true, logged: true, delay: 90 }, // logged 90min late
    { time: "19:00", sent: true, logged: true, delay: 45 }
  ]
}
Weekly Review:
javascript{
  weekStart: "2024-11-18",
  weekEnd: "2024-11-24",
  weight: {
    start: 76.0,
    end: 76.3,
    change: 0.3,
    target: 0.5
  },
  workouts: {
    planned: 5,
    completed: 4,
    missed: ["Friday"]
  },
  performance: {
    upper: { avgFeeling: "good", notes: "All targets hit" },
    lower: { avgFeeling: "hard", avgExtraRest: 52, notes: "Distracted or weight too heavy?" },
    cardio: { avgFeeling: "good", rounds: 3 }
  },
  nutrition: {
    avgCalories: 2850,
    targetCalories: 3100,
    avgProtein: 148,
    targetProtein: 155,
    daysHitTarget: 5
  },
  patterns: [
    {
      observation: "Upper body marked 'Hard' on Nov 21 after 135g protein day on Nov 20",
      correlation: "low_protein_before_strength"
    },
    {
      observation: "Avg +52s extra rest on lower body days",
      correlation: "distraction_or_heavy_weight"
    }
  ],
  recommendations: [
    {
      action: "increase_calories",
      detail: "3,000 cal/day (from 2,850 avg)",
      reason: "Weight gain slower than target"
    },
    {
      action: "increase_protein_strength_days",
      detail: "160g protein on Thu/Sat",
      reason: "Correlation between low protein and hard sessions"
    },
    {
      action: "reduce_rest_distractions",
      detail: "Leave phone in locker on lower days",
      reason: "Averaging +52s extra rest"
    }
  ],
  aiSummary: "Solid week overall. Weight gain slightly below target but performance is good. Focus on hitting protein targets before strength days and minimizing distractions during rest periods."
}
```

---

### **6.4 API Integration Details**

**Gemini 2.0 Flash - Meal Photo Analysis**

*Endpoint:*
```
POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent
Request:
javascript{
  contents: [{
    parts: [
      { 
        text: "Analyze this meal photo. List the food items you see, then estimate total calories and protein in grams. Format your response as JSON: {\"foods\": [\"item1\", \"item2\"], \"calories\": number, \"protein\": number, \"confidence\": 0-1}" 
      },
      { 
        inline_data: { 
          mime_type: "image/jpeg", 
          data: base64EncodedImage 
        } 
      }
    ]
  }],
  generationConfig: {
    temperature: 0.2, // Lower = more consistent
    maxOutputTokens: 300
  }
}
Response Handling:
javascriptconst response = await fetch(apiUrl, { method: 'POST', headers, body });
const data = await response.json();

// Extract text, strip markdown if present
let text = data.candidates[0].content.parts[0].text;
text = text.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();

// Parse JSON
const analysis = JSON.parse(text);
// analysis = { foods: [...], calories: 650, protein: 48, confidence: 0.85 }

Gemini 2.0 Flash - Workout Adjustment
Request:
javascript{
  contents: [{
    parts: [{
      text: `You are a strength coach. Analyze this workout data and suggest adjustments for next week.

Last workout (Goblet Squats):
- Week 1: 4x10 @ 20kg, all sets "Easy"
- Week 2: 4x10 @ 22kg, sets 1-2 "Good", sets 3-4 "Hard" (fatigued)
- Avg extra rest: +52 seconds

What weight should be used next week? Explain briefly.

Format: {"nextWeight": number, "reasoning": "brief explanation", "volumeAdjustment": "keep/reduce sets"}`
    }]
  }],
  generationConfig: {
    temperature: 0.3,
    maxOutputTokens: 200
  }
}
Expected Response:
json{
  "nextWeight": 22,
  "reasoning": "Weight is appropriate - fatigue on sets 3-4 suggests adequate challenge. Extra rest indicates recovery needs, not excessive load. Maintain weight and focus on minimizing rest distractions.",
  "volumeAdjustment": "keep"
}

Gemini 2.0 Flash - Weekly Review
Request:
javascript{
  contents: [{
    parts: [{
      text: `Analyze this week's training and nutrition data. Provide insights and actionable recommendations.

WEIGHT:
Start: 76.0kg, End: 76.3kg (+0.3kg)
Target: +0.5kg per week

WORKOUTS:
- Completed 4/5 planned sessions
- Upper body: All exercises marked "Good", hit all targets
- Lower body: Avg +52s extra rest, sets 3-4 often "Hard" (fatigued)
- Cardio: 3 rounds bag work, felt "Good"

NUTRITION:
- Avg calories: 2,850/day (target: 3,100)
- Avg protein: 148g/day (target: 155g)
- Hit target: 5/7 days
- Missed days: Tuesday (2,200 cal), Friday (2,400 cal)

PATTERNS:
- Thursday upper body marked "Hard" after Wednesday's 135g protein
- Lower body extra rest consistent across both sessions

Provide: (1) 2-3 key insights, (2) 3 specific actionable recommendations.

Format as JSON: {"insights": ["...", "..."], "recommendations": [{"action": "...", "detail": "...", "reason": "..."}]}`
    }]
  }],
  generationConfig: {
    temperature: 0.4,
    maxOutputTokens: 800
  }
}
Expected Response:
json{
  "insights": [
    "Weight gain is below target, but close. Calories averaged 250/day short - consistent with 0.2kg/week shortfall.",
    "Upper body performance is excellent. Lower body struggles appear related to rest discipline, not programming.",
    "Protein intake correlates with performance - Thursday's 'Hard' session followed low protein Wednesday."
  ],
  "recommendations": [
    {
      "action": "increase_calories",
      "detail": "Add 150 cal/day - one extra snack (banana + peanut butter)",
      "reason": "Close to target, small bump should get to +0.5kg/week"
    },
    {
      "action": "protein_timing",
      "detail": "Ensure 160g protein on Wednesday and Saturday (before strength days)",
      "reason": "Clear correlation between low protein and hard sessions next day"
    },
    {
      "action": "rest_discipline",
      "detail": "Leave phone in locker during lower body workouts",
      "reason": "Consistent +52s extra rest suggests distraction, not fatigue"
    }
  ]
}

6.5 Offline Strategy
What Works Offline:

View workout program
Start/complete workout sessions
Log meals (text/voice, photos stored locally)
View past workouts
View progress charts

What Requires Online:

Meal photo analysis (Gemini API)
Weekly review generation (Gemini API)
Workout adjustment recommendations (Gemini API)

Offline â†’ Online Sync:
javascript// When back online, process queued items
serviceWorker.addEventListener('sync', async (event) => {
  if (event.tag === 'sync-meals') {
    // Get all meals with photos pending analysis
    const pendingMeals = await getPendingMealAnalysis();
    
    for (const meal of pendingMeals) {
      try {
        const analysis = await analyzeMealPhoto(meal.photo);
        updateMealWithAnalysis(meal.id, analysis);
      } catch (error) {
        // Retry later
        scheduleRetry(meal.id);
      }
    }
  }
});

6.6 Performance Optimization
Bundle Size Target: < 500KB

HTML + CSS + JS: ~300KB
Images (compressed): ~150KB
Service worker: ~50KB

Loading Strategy:

Critical CSS inline in <head>
Defer non-critical JS
Lazy load images below fold
Preload key assets

Caching Strategy:
javascript// Service Worker
const CACHE_NAME = 'trainsync-v1';
const STATIC_ASSETS = [
  '/',
  '/styles.css',
  '/app.js',
  '/exercise-images/*'
];

// Cache-first for static assets
self.addEventListener('fetch', (event) => {
  if (isStaticAsset(event.request.url)) {
    event.respondWith(
      caches.match(event.request)
        .then(cached => cached || fetch(event.request))
    );
  }
});
Target Performance:

First Contentful Paint: < 1.5s
Time to Interactive: < 3s
Lighthouse Score: 95+


6.7 Security & Privacy
Data Privacy:

All workout/meal data stored locally (device only)
Photos never leave device except for analysis (then deleted from server)
No user tracking or analytics
No third-party scripts

API Security:

API key stored in environment variable
Requests proxied through backend function (hide key from client)
Rate limiting enforced (1,500 req/day per user)

Future Consideration:

End-to-end encryption for backup/sync
Apple Notes export as backup mechanism
Option to delete all data


7. DEVELOPMENT ROADMAP
Phase 1: MVP (2-3 weeks)
Week 1:

 Design system implementation (colors, typography, components)
 Home screen layout
 Workout flow (timer, rest tracking)
 Basic data models (localStorage)

Week 2:

 Meal logging (photo, voice, text)
 Gemini API integration (meal analysis)
 Nutrition tracking UI
 Rest accountability logic

Week 3:

 Weekly review generation
 Workout adjustment logic
 Notifications system
 PWA setup (manifest, service worker)
 Testing & polish

Phase 2: Refinement (1-2 weeks)

 Workout history view
 Progress charts (weight, exercise progression)
 Export to Apple Notes
 Offline sync improvements
 Performance optimization

Phase 3: Future Features (backlog)

 Exercise form video analysis (Gemini video API)
 Voice coaching during workouts
 Apple Watch companion
 Social features (share workouts)
 Premium tier (advanced analytics)


8. SUCCESS CRITERIA
MVP Launch Criteria:

 All 5 workout days programmed
 Meal photo analysis < 5 seconds
 Rest tracking accurate to Â±2 seconds
 Notifications trigger correctly
 Works offline (workout + logging)
 Weekly review generates insights
 Lighthouse score 90+
 Zero crashes in 20 workout sessions

3-Month Success:

80%+ workout completion rate
4+ meals logged per day
Weight gain trajectory: +0.4-0.6kg/week
Progressive overload maintained on 80% of exercises
User reports app is "essential" to training


9. RISKS & MITIGATIONS
RiskImpactMitigationGemini API rate limits hitHighFree tier 1,500/day = 20x needed; add fallback to GPT-4o-miniMeal analysis inaccurateMediumAllow manual adjustment; learn from correctionsNotifications ignoredMediumEscalate intelligently; don't nag; provide valueToo complex to use dailyHighObsessive simplicity; < 3 taps for any actionBattery drain from timersLowScreen dimming during rest; optimize JS